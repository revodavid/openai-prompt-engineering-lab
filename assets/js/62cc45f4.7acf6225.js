"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[261],{4137:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),d=p(n),c=a,m=d["".concat(l,".").concat(c)]||d[c]||u[c]||r;return n?o.createElement(m,i(i({ref:t},h),{},{components:n})):o.createElement(m,i({ref:t},h))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},286:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=n(7462),a=(n(7294),n(4137));const r={},i="Conversations",s={unversionedId:"Conversations",id:"Conversations",title:"Conversations",description:"If you've used consumer conversational AI services like OpenAI's ChatGPT service or Bing Chat, you may wonder how the AI agent \"remembers\" context from earlier in the conversation. As we've seen, the foundation Generative AI models begid these applications cannot learn, so how does information from the conversation persist?",source:"@site/docs/50-Conversations.md",sourceDirName:".",slug:"/Conversations",permalink:"/openai-prompt-engineering-lab/Conversations",draft:!1,editUrl:"https://github.com/revodavid/openai-prompt-engineering-lab/tree/main/docs/50-Conversations.md",tags:[],version:"current",sidebarPosition:50,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Using Generative AI",permalink:"/openai-prompt-engineering-lab/Applications"},next:{title:"Prompt Engineering",permalink:"/openai-prompt-engineering-lab/Prompt-Engineering"}},l={},p=[{value:"In OpenAI",id:"in-openai",level:3},{value:"In Azure OpenAI Service",id:"in-azure-openai-service",level:3},{value:"Chat Playgound Orientation",id:"chat-playgound-orientation",level:2},{value:"A simple example",id:"a-simple-example",level:2},{value:"Configuring the AI Assistant with the System Message",id:"configuring-the-ai-assistant-with-the-system-message",level:2},{value:"Providing few-shot examples in the System Message",id:"providing-few-shot-examples-in-the-system-message",level:2}],h={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,o.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"conversations"},"Conversations"),(0,a.kt)("p",null,"If you've used consumer conversational AI services like OpenAI's ",(0,a.kt)("a",{parentName:"p",href:"https://chat.openai.com/"},"ChatGPT")," service or ",(0,a.kt)("a",{parentName:"p",href:"https://bing.com/chat"},"Bing Chat"),', you may wonder how the AI agent "remembers" context from earlier in the conversation. As we\'ve seen, the foundation Generative AI models begid these applications cannot learn, so how does information from the conversation persist?'),(0,a.kt)("p",null,"The answer is: it's a trick! The AI model isn't reacting to your most recent prompt in isolation. The user interface for the chat service provides the model with the ",(0,a.kt)("em",{parentName:"p"},"entire")," chat history at each turn, invisibly to you, the user. Also observe that if you exit the conversation and return later, the model has no memory of your previous interactions, and you will start again from scratch."),(0,a.kt)("p",null,"In this section, we'll explore conversations using the Chat Playground in Azure OpenAI Service or OpenAI."),(0,a.kt)("h3",{id:"in-openai"},"In OpenAI"),(0,a.kt)("p",null,"Click on the ",(0,a.kt)("a",{parentName:"p",href:"https://platform.openai.com/playground?mode=chat"},"Playground")," tab, and confirm that the Mode selection in the right panel to ",(0,a.kt)("inlineCode",{parentName:"p"},"Chat"),". The Model option should be set to: ",(0,a.kt)("inlineCode",{parentName:"p"},"gpt-3.5-turbo"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},'Note: The OpenAI chat playground user interface is somewhat different than in Azure OpenAI Service. Enter prompts next to the word "User" (click "+Add Message" to enter subsequent prompts), and press the "Submit" button to proceed.')),(0,a.kt)("h3",{id:"in-azure-openai-service"},"In Azure OpenAI Service"),(0,a.kt)("p",null,"Return to the Azure OpenAI Studio, and click ",(0,a.kt)("strong",{parentName:"p"},"Chat")," under ",(0,a.kt)("strong",{parentName:"p"},"Playground")," in the left-hand menu. The Deployment option should be set to: ",(0,a.kt)("inlineCode",{parentName:"p"},"gpt-3.5-turbo"),"."),(0,a.kt)("p",null,'If you ever need to return to the default settings with Azure OpenAI Service, go to the "Assistant Setup" pane and select "Default" in the "Use a system message template" dropdown. Do this now and after you change any of the settings in the Chat Playground.'),(0,a.kt)("h2",{id:"chat-playgound-orientation"},"Chat Playgound Orientation"),(0,a.kt)("p",null,'The Chat Playground is a simple interface for interacting with natural language generative AI models in a conversational setting. The interface is divided into two panes. The left pane, labeled "Assistant Setup" or "System", is where we can provide context to style and inform the agent\'s responses. The right pane, "Chat session", is where we can see the conversation as it unfolds. '),(0,a.kt)("p",null,'The far right column, "Parameters", allows you to select the model used and set its control parameters. We will use the ',(0,a.kt)("inlineCode",{parentName:"p"},"gpt-35-turbo")," model here, but GPT-4 models may also be used here if you have access to them. "),(0,a.kt)("p",null,"Make sure the Temperature parameter is set to 1 and the Maximum Length (OpenAI) / Max response (Azure OpenAI Service) parameter is set to 800."),(0,a.kt)("h2",{id:"a-simple-example"},"A simple example"),(0,a.kt)("p",null,'In the "Chat Session"  pane, enter the text below:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"How many neutrons are in a hydrogen nucleus?\n")),(0,a.kt)("p",null,"Click ",(0,a.kt)("strong",{parentName:"p"},"Send"),". The AI agent will respond with something like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    A hydrogen nucleus (also called a proton) has 0 neutrons.\n")),(0,a.kt)("p",null,"Now add this response in the User message box:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"What about the isotopes?\n")),(0,a.kt)("p",null,"Click ",(0,a.kt)("strong",{parentName:"p"},"Send"),". The agent will respond with an answer involving isotopes of hydrogen: deuterium (one neutron) and tritium (two neutrons). Even though your second prompt did not mention hydrogen or neutrons, the response used the context of the chat to provide a more useful answer."),(0,a.kt)("p",null,'Now, click the "View Code" button, and select the "json" option from the drop-down.'),(0,a.kt)("p",null,"This shows the data provided to the ",(0,a.kt)("inlineCode",{parentName:"p"},"gpt-35-turbo")," API call, as a JSON array. Note that includes the entire context of the conversation (annotated by the roles: assistant, and user), along with the system message from the Assistant Setup pane."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},'In OpenAI, the "Assistant Setup" pane is replaced by the "System" pane.OpenAI doesn\'t provide a system message by default, but you can enter "You are an AI assistant that helps people find information." in the System panel to see the effect.')),(0,a.kt)("p",null,'Click the "View Code" button. Even if you\'re not familiar with using REST APIs (for which the JSON option is useful), or the curl application, or the Python or C# languages, this code shows you the information provided to the ',(0,a.kt)("inlineCode",{parentName:"p"},"gpt-35-turbo")," API at ",(0,a.kt)("em",{parentName:"p"},"each")," turn of the conversation. (We'll explore the API more in a later section.)"),(0,a.kt)("p",null,"Click ",(0,a.kt)("strong",{parentName:"p"},"Close"),' in the View Code pane, uncheck the "Show raw JSON" option, and click ',(0,a.kt)("strong",{parentName:"p"},"Clear chat")," to reset the conversation before proceeding."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"In OpenAI, refresh the page to clear the chat.")),(0,a.kt)("h2",{id:"configuring-the-ai-assistant-with-the-system-message"},"Configuring the AI Assistant with the System Message"),(0,a.kt)("p",null,"In the Assistant Setup pane, enter the following text in the ",(0,a.kt)("strong",{parentName:"p"},"System message")," field:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"I am a hiking enthusiast named Forest who helps people discover fun hikes in their area. I am upbeat and friendly. I introduce myself when first saying hello. When helping people out, I always ask them for this information to inform the hiking recommendation I provide:\n1.  Where they are located\n2.  What hiking intensity they are looking for\nI will then provide three suggestions for nearby hikes that vary in length after I get this information. I will also share an interesting fact about the local nature on the hikes when making a recommendation.\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"In OpenAI, enter the text in the field marked ",(0,a.kt)("strong",{parentName:"p"},"System"),".")),(0,a.kt)("p",null,'Observe that the System Message gives the assistant a name ("Forest"), a personality ("upbeat and friendly"), and instructions on how to behave ("introduce myself"; "always ask them for this information"), and how to respond ("provide three suggestions").'),(0,a.kt)("p",null,"The text provided in the System Message is handled specially by the model, and is intended to have more influence on the model's responses than the User Message text or other context provided in the prompt. (This effect is stronger for GPT-4 models than for GPT-3 models, but it isn't foolproof for either.)"),(0,a.kt)("p",null,"In the User Message box, enter this text with the personal details of your choice:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Hi, I'm <your name>. I'm looking for a hike near <my city>. I want to take my dog with me.\n\n")),(0,a.kt)("p",null,"Did the AI include its name, Forest in the response? Did it ask a follow-up question? How would you rate its response?"),(0,a.kt)("p",null,"Try clearing the chat and starting over with your initial prompt. How different was the outcome? (The Temperature parameter is set to 1, so there's scope for variability.)"),(0,a.kt)("h2",{id:"providing-few-shot-examples-in-the-system-message"},"Providing few-shot examples in the System Message"),(0,a.kt)("p",null,'In the Assistant Setup pane, select "IRS tax chatbot" from the dropdown. Note that in addition to the System message, there is now an example provided in the "Few-shot examples" section (click the arrow next to "Few-shot examples" to see it).'),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"This example isn't included in the OpenAI chat playground, but you can enter this system message manually in the System panel.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'\u2022   You are an IRS chatbot whose primary goal is to help users with filing their tax returns for the 2022 year. \n\u2022   Provide concise replies that are polite and professional. \n\u2022   Answer questions truthfully based on official government information, with consideration to context provided below on changes for 2022 that can affect tax refund.  \n\u2022   Do not answer questions that are not related to United States tax procedures and respond with "I can only help with any tax-related questions you may have.". \n\u2022   If you do not know the answer to a question, respond by saying \u201cI do not know the answer to your question. You may be able to find your answer at www.irs.gov/faqs\u201d  \n\nChanges for 2022 that can affect tax refund: \n\u2022   Changes in the number of dependents, employment or self-employment income and divorce, among other factors, may affect your tax-filing status and refund. No additional stimulus payments. Unlike 2020 and 2021, there were no new stimulus payments for 2022 so taxpayers should not expect to get an additional payment.  \n\u2022   Some tax credits return to 2019 levels.  This means that taxpayers will likely receive a significantly smaller refund compared with the previous tax year. Changes include amounts for the Child Tax Credit (CTC), the Earned Income Tax Credit (EITC) and the Child and Dependent Care Credit will revert to pre-COVID levels.  \n\u2022   For 2022, the CTC is worth $2,000 for each qualifying child. A child must be under age 17 at the end of 2022 to be a qualifying child.For the EITC, eligible taxpayers with no children will get $560 for the 2022 tax year.The Child and Dependent Care Credit returns to a maximum of $2,100 in 2022.\n\u2022   No above-the-line charitable deductions. During COVID, taxpayers were able to take up to a $600 charitable donation tax deduction on their tax returns. However, for tax year 2022, taxpayers who don\u2019t itemize and who take the standard deduction, won\u2019t be able to deduct their charitable contributions.\n\u2022   More people may be eligible for the Premium Tax Credit. For tax year 2022, taxpayers may qualify for temporarily expanded eligibility for the premium tax credit. \n\u2022   Eligibility rules changed to claim a tax credit for clean vehicles. Review the changes under the Inflation Reduction Act of 2022 to qualify for a Clean Vehicle Credit.\n')),(0,a.kt)("p",null,"Once again, the system message guides the model on its personality and responses. Importantly, it also guides the model on what ",(0,a.kt)("em",{parentName:"p"},"not"),' to do: "Do not answer questions that are not related to United States tax procedures"; "If you do not know the answer to a question, respond by saying, I do not know". Providing prompts like these for unintended actions is an effective way to prevent the model from generating responses that are off-topic or inappropriate.'),(0,a.kt)("p",null,'The system message also includes factual information, for example: "For 2022, the CTC is worth $2,000 for each qualifying child." This is a technique you can use to provide the model with information that wasn\'t included in its training data. Since the system message is provided to the model with every conversation turn, the model may use this information in its responses.'),(0,a.kt)("p",null,"One example (or, a one-shot example) is also provided in the Assistant Setup pane. Examples are added to the beginning of the chat history to provide further grounding to the model."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"In OpenAI, you can add the example below to the chat history before your prompts.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"USER: When do I need to file my taxes by?\n\nASSISTANT: In 2023, you will need to file your taxes by April 18th. The date falls after the usual April 15th deadline because April 15th falls on a Saturday in 2023. For more details, see https://www.irs.gov/filing/individuals/when-to-file\n")),(0,a.kt)("p",null,"Here are some prompts to try to observe the effects of the system prompt and the one-shot example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"What is the deadline for filing taxes?\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Are home office expenses deductible?\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Where should I invest my money?\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"You're stupid!\n")),(0,a.kt)("p",null,"Also try asking follow-up questions to get the model to clarify or elaborate on its responses."))}u.isMDXComponent=!0}}]);